{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\n\nvar _this = this,\n    _jsxFileName = \"/home/ashraf/code/ashrafuthman/condenast-challenge/pages/index.js\";\n\nvar __jsx = React.createElement;\nimport React, { useState } from 'react';\nimport Head from 'next/head';\nimport { fetchPosts } from '../lib/api';\nimport Post from '../components/Post';\nimport PropTypes from 'prop-types';\nimport Layout from '../components/Layout';\nimport LoadMoreButton from '../components/LoadMoreButton';\nimport MainFeaturedPost from '../components/MainFeaturedPost';\nimport CategoryName from '../components/CategoryName';\n\nvar Home = function Home(_ref) {\n  var posts = _ref.posts;\n\n  var _useState = useState(false),\n      loading = _useState[0],\n      setLoading = _useState[1];\n\n  var _useState2 = useState(posts),\n      morePosts = _useState2[0],\n      setMorePosts = _useState2[1];\n\n  var _useState3 = useState(2),\n      currentPage = _useState3[0],\n      setCurrentPage = _useState3[1];\n\n  var fetchMore = function fetchMore() {\n    setLoading(true);\n    setCurrentPage(currentPage + 1);\n    fetchPosts(20, currentPage).then(function (newPosts) {\n      setLoading(false);\n      setMorePosts([].concat(_toConsumableArray(morePosts), _toConsumableArray(newPosts)));\n    })[\"catch\"](function (err) {\n      return console.error(err);\n    });\n  };\n\n  return __jsx(Layout, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 29,\n      columnNumber: 5\n    }\n  }, __jsx(Head, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 30,\n      columnNumber: 7\n    }\n  }, __jsx(\"title\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 31,\n      columnNumber: 9\n    }\n  }, \"articles app\")), morePosts.map(function (post, i) {\n    return i === 0 ? __jsx(\"div\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 36,\n        columnNumber: 13\n      }\n    }, __jsx(MainFeaturedPost, {\n      post: post,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 37,\n        columnNumber: 13\n      }\n    }), __jsx(CategoryName, {\n      name: \"Latest posts\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 38,\n        columnNumber: 13\n      }\n    })) : __jsx(Post, {\n      post: post,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 40,\n        columnNumber: 13\n      }\n    });\n  }), __jsx(LoadMoreButton, {\n    loading: loading,\n    handleMore: fetchMore,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 7\n    }\n  }));\n};\n\nHome.getInitialProps = function _callee() {\n  var posts;\n  return _regeneratorRuntime.async(function _callee$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          _context.next = 2;\n          return _regeneratorRuntime.awrap(fetchPosts(20, 1));\n\n        case 2:\n          posts = _context.sent;\n          return _context.abrupt(\"return\", {\n            posts: posts\n          });\n\n        case 4:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, null, null, null, Promise);\n};\n\nHome.propTypes = {\n  posts: PropTypes.array\n};\nexport default Home;","map":{"version":3,"sources":["/home/ashraf/code/ashrafuthman/condenast-challenge/pages/index.js"],"names":["React","useState","Head","fetchPosts","Post","PropTypes","Layout","LoadMoreButton","MainFeaturedPost","CategoryName","Home","posts","loading","setLoading","morePosts","setMorePosts","currentPage","setCurrentPage","fetchMore","then","newPosts","err","console","error","map","post","i","getInitialProps","propTypes","array"],"mappings":";;;;;;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,QAAgC,OAAhC;AACA,OAAOC,IAAP,MAAiB,WAAjB;AACA,SAASC,UAAT,QAA2B,YAA3B;AACA,OAAOC,IAAP,MAAiB,oBAAjB;AACA,OAAOC,SAAP,MAAsB,YAAtB;AACA,OAAOC,MAAP,MAAmB,sBAAnB;AACA,OAAOC,cAAP,MAA2B,8BAA3B;AACA,OAAOC,gBAAP,MAA6B,gCAA7B;AACA,OAAOC,YAAP,MAAyB,4BAAzB;;AAEA,IAAMC,IAAI,GAAG,SAAPA,IAAO,OAAe;AAAA,MAAZC,KAAY,QAAZA,KAAY;;AAAA,kBACIV,QAAQ,CAAC,KAAD,CADZ;AAAA,MACnBW,OADmB;AAAA,MACVC,UADU;;AAAA,mBAEQZ,QAAQ,CAACU,KAAD,CAFhB;AAAA,MAEnBG,SAFmB;AAAA,MAERC,YAFQ;;AAAA,mBAGYd,QAAQ,CAAC,CAAD,CAHpB;AAAA,MAGnBe,WAHmB;AAAA,MAGNC,cAHM;;AAK1B,MAAMC,SAAS,GAAG,SAAZA,SAAY,GAAM;AACtBL,IAAAA,UAAU,CAAC,IAAD,CAAV;AACAI,IAAAA,cAAc,CAACD,WAAW,GAAG,CAAf,CAAd;AAEAb,IAAAA,UAAU,CAAC,EAAD,EAAKa,WAAL,CAAV,CACGG,IADH,CACQ,UAAAC,QAAQ,EAAI;AAChBP,MAAAA,UAAU,CAAC,KAAD,CAAV;AACAE,MAAAA,YAAY,8BAAKD,SAAL,sBAAmBM,QAAnB,GAAZ;AACD,KAJH,WAKS,UAAAC,GAAG;AAAA,aAAIC,OAAO,CAACC,KAAR,CAAcF,GAAd,CAAJ;AAAA,KALZ;AAMD,GAVD;;AAYA,SACE,MAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADF,CADF,EAKGP,SAAS,CAACU,GAAV,CAAc,UAACC,IAAD,EAAOC,CAAP;AAAA,WACbA,CAAC,KAAK,CAAN,GACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACA,MAAC,gBAAD;AAAkB,MAAA,IAAI,EAAED,IAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADA,EAEA,MAAC,YAAD;AAAc,MAAA,IAAI,EAAC,cAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFA,CADJ,GAKI,MAAC,IAAD;AAAM,MAAA,IAAI,EAAEA,IAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MANS;AAAA,GAAd,CALH,EAeE,MAAC,cAAD;AAAgB,IAAA,OAAO,EAAEb,OAAzB;AAAkC,IAAA,UAAU,EAAEM,SAA9C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAfF,CADF;AAoBD,CArCD;;AAuCAR,IAAI,CAACiB,eAAL,GAAuB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2CACDxB,UAAU,CAAC,EAAD,EAAK,CAAL,CADT;;AAAA;AACfQ,UAAAA,KADe;AAAA,2CAEd;AAAEA,YAAAA,KAAK,EAALA;AAAF,WAFc;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,CAAvB;;AAKAD,IAAI,CAACkB,SAAL,GAAiB;AACfjB,EAAAA,KAAK,EAAEN,SAAS,CAACwB;AADF,CAAjB;AAIA,eAAenB,IAAf","sourcesContent":["import React, { useState } from 'react'\nimport Head from 'next/head'\nimport { fetchPosts } from '../lib/api'\nimport Post from '../components/Post'\nimport PropTypes from 'prop-types'\nimport Layout from '../components/Layout'\nimport LoadMoreButton from '../components/LoadMoreButton'\nimport MainFeaturedPost from '../components/MainFeaturedPost'\nimport CategoryName from '../components/CategoryName'\n\nconst Home = ({ posts }) => {\n  const [loading, setLoading] = useState(false)\n  const [morePosts, setMorePosts] = useState(posts)\n  const [currentPage, setCurrentPage] = useState(2)\n\n  const fetchMore = () => {\n    setLoading(true)\n    setCurrentPage(currentPage + 1)\n\n    fetchPosts(20, currentPage)\n      .then(newPosts => {\n        setLoading(false)\n        setMorePosts([...morePosts, ...newPosts])\n      })\n      .catch(err => console.error(err))\n  }\n\n  return (\n    <Layout>\n      <Head>\n        <title>articles app</title>\n      </Head>\n\n      {morePosts.map((post, i) =>\n        i === 0\n          ? <div>\n            <MainFeaturedPost post={post} />\n            <CategoryName name='Latest posts' />\n          </div>\n          : <Post post={post} />\n\n      )}\n\n      <LoadMoreButton loading={loading} handleMore={fetchMore} />\n\n    </Layout>\n  )\n}\n\nHome.getInitialProps = async () => {\n  const posts = await fetchPosts(20, 1)\n  return { posts }\n}\n\nHome.propTypes = {\n  posts: PropTypes.array\n}\n\nexport default Home\n"]},"metadata":{},"sourceType":"module"}