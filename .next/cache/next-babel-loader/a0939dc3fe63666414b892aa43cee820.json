{"ast":null,"code":"var _jsxFileName = \"/home/ashraf/code/ashrafuthman/condenast-challenge/pages/index.js\";\nvar __jsx = React.createElement;\nimport React, { useState } from 'react';\nimport Head from 'next/head';\nimport { fetchPosts } from '../lib/api';\nimport Post from '../components/Post';\nimport PropTypes from 'prop-types';\nimport Layout from '../components/Layout';\nimport LoadMoreButton from '../components/LoadMoreButton';\nimport MainFeaturedPost from '../components/MainFeaturedPost';\nimport CategoryName from '../components/CategoryName';\n\nconst Home = ({\n  posts\n}) => {\n  const {\n    0: loading,\n    1: setLoading\n  } = useState(false);\n  const {\n    0: morePosts,\n    1: setMorePosts\n  } = useState(posts);\n  const {\n    0: currentPage,\n    1: setCurrentPage\n  } = useState(2);\n\n  const fetchMore = () => {\n    setLoading(true);\n    setCurrentPage(currentPage + 1);\n    fetchPosts(20, currentPage).then(newPosts => {\n      setLoading(false);\n      setMorePosts([...morePosts, ...newPosts]);\n    }).catch(err => console.error(err));\n  };\n\n  return __jsx(Layout, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 29,\n      columnNumber: 5\n    }\n  }, __jsx(Head, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 30,\n      columnNumber: 7\n    }\n  }, __jsx(\"title\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 31,\n      columnNumber: 9\n    }\n  }, \"articles app\")), morePosts.map((post, i) => i === 0 ? __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 13\n    }\n  }, __jsx(MainFeaturedPost, {\n    post: post,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 13\n    }\n  }), __jsx(CategoryName, {\n    name: \"Latest posts\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 13\n    }\n  })) : __jsx(Post, {\n    post: post,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 13\n    }\n  })), __jsx(LoadMoreButton, {\n    loading: loading,\n    handleMore: fetchMore,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 7\n    }\n  }));\n};\n\nHome.getInitialProps = async () => {\n  const posts = await fetchPosts(20, 1);\n  return {\n    posts\n  };\n};\n\nHome.propTypes = {\n  posts: PropTypes.array\n};\nexport default Home;","map":{"version":3,"sources":["/home/ashraf/code/ashrafuthman/condenast-challenge/pages/index.js"],"names":["React","useState","Head","fetchPosts","Post","PropTypes","Layout","LoadMoreButton","MainFeaturedPost","CategoryName","Home","posts","loading","setLoading","morePosts","setMorePosts","currentPage","setCurrentPage","fetchMore","then","newPosts","catch","err","console","error","map","post","i","getInitialProps","propTypes","array"],"mappings":";;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,QAAgC,OAAhC;AACA,OAAOC,IAAP,MAAiB,WAAjB;AACA,SAASC,UAAT,QAA2B,YAA3B;AACA,OAAOC,IAAP,MAAiB,oBAAjB;AACA,OAAOC,SAAP,MAAsB,YAAtB;AACA,OAAOC,MAAP,MAAmB,sBAAnB;AACA,OAAOC,cAAP,MAA2B,8BAA3B;AACA,OAAOC,gBAAP,MAA6B,gCAA7B;AACA,OAAOC,YAAP,MAAyB,4BAAzB;;AAEA,MAAMC,IAAI,GAAG,CAAC;AAAEC,EAAAA;AAAF,CAAD,KAAe;AAC1B,QAAM;AAAA,OAACC,OAAD;AAAA,OAAUC;AAAV,MAAwBZ,QAAQ,CAAC,KAAD,CAAtC;AACA,QAAM;AAAA,OAACa,SAAD;AAAA,OAAYC;AAAZ,MAA4Bd,QAAQ,CAACU,KAAD,CAA1C;AACA,QAAM;AAAA,OAACK,WAAD;AAAA,OAAcC;AAAd,MAAgChB,QAAQ,CAAC,CAAD,CAA9C;;AAEA,QAAMiB,SAAS,GAAG,MAAM;AACtBL,IAAAA,UAAU,CAAC,IAAD,CAAV;AACAI,IAAAA,cAAc,CAACD,WAAW,GAAG,CAAf,CAAd;AAEAb,IAAAA,UAAU,CAAC,EAAD,EAAKa,WAAL,CAAV,CACGG,IADH,CACQC,QAAQ,IAAI;AAChBP,MAAAA,UAAU,CAAC,KAAD,CAAV;AACAE,MAAAA,YAAY,CAAC,CAAC,GAAGD,SAAJ,EAAe,GAAGM,QAAlB,CAAD,CAAZ;AACD,KAJH,EAKGC,KALH,CAKSC,GAAG,IAAIC,OAAO,CAACC,KAAR,CAAcF,GAAd,CALhB;AAMD,GAVD;;AAYA,SACE,MAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADF,CADF,EAKGR,SAAS,CAACW,GAAV,CAAc,CAACC,IAAD,EAAOC,CAAP,KACbA,CAAC,KAAK,CAAN,GACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACA,MAAC,gBAAD;AAAkB,IAAA,IAAI,EAAED,IAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADA,EAEA,MAAC,YAAD;AAAc,IAAA,IAAI,EAAC,cAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFA,CADJ,GAKI,MAAC,IAAD;AAAM,IAAA,IAAI,EAAEA,IAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IANL,CALH,EAeE,MAAC,cAAD;AAAgB,IAAA,OAAO,EAAEd,OAAzB;AAAkC,IAAA,UAAU,EAAEM,SAA9C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAfF,CADF;AAoBD,CArCD;;AAuCAR,IAAI,CAACkB,eAAL,GAAuB,YAAY;AACjC,QAAMjB,KAAK,GAAG,MAAMR,UAAU,CAAC,EAAD,EAAK,CAAL,CAA9B;AACA,SAAO;AAAEQ,IAAAA;AAAF,GAAP;AACD,CAHD;;AAKAD,IAAI,CAACmB,SAAL,GAAiB;AACflB,EAAAA,KAAK,EAAEN,SAAS,CAACyB;AADF,CAAjB;AAIA,eAAepB,IAAf","sourcesContent":["import React, { useState } from 'react'\nimport Head from 'next/head'\nimport { fetchPosts } from '../lib/api'\nimport Post from '../components/Post'\nimport PropTypes from 'prop-types'\nimport Layout from '../components/Layout'\nimport LoadMoreButton from '../components/LoadMoreButton'\nimport MainFeaturedPost from '../components/MainFeaturedPost'\nimport CategoryName from '../components/CategoryName'\n\nconst Home = ({ posts }) => {\n  const [loading, setLoading] = useState(false)\n  const [morePosts, setMorePosts] = useState(posts)\n  const [currentPage, setCurrentPage] = useState(2)\n\n  const fetchMore = () => {\n    setLoading(true)\n    setCurrentPage(currentPage + 1)\n\n    fetchPosts(20, currentPage)\n      .then(newPosts => {\n        setLoading(false)\n        setMorePosts([...morePosts, ...newPosts])\n      })\n      .catch(err => console.error(err))\n  }\n\n  return (\n    <Layout>\n      <Head>\n        <title>articles app</title>\n      </Head>\n\n      {morePosts.map((post, i) =>\n        i === 0\n          ? <div>\n            <MainFeaturedPost post={post} />\n            <CategoryName name='Latest posts' />\n          </div>\n          : <Post post={post} />\n\n      )}\n\n      <LoadMoreButton loading={loading} handleMore={fetchMore} />\n\n    </Layout>\n  )\n}\n\nHome.getInitialProps = async () => {\n  const posts = await fetchPosts(20, 1)\n  return { posts }\n}\n\nHome.propTypes = {\n  posts: PropTypes.array\n}\n\nexport default Home\n"]},"metadata":{},"sourceType":"module"}